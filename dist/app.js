!function(e){var n={};function l(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=n,l.d=function(e,n,t){l.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,n){if(1&n&&(e=l(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)l.d(t,r,function(n){return e[n]}.bind(null,r));return t},l.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(n,"a",n),n},l.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},l.p="",l(l.s=0)}([function(e,n){let l=4,t=3,r=2,o=1,u=11,c=5,f=6,a=7,v=8,S=9,s=10,d={FPS:30};d.STATE=new Map,d.Ghost=function(e,n,l){let i=null,c=null,f=null,a=null,v=null;function S(e,n){let l=y()?1:null===f&&null!==a?4:2,i=e===r&&-l||e===u&&l||0,c=e===o&&l||e===t&&-l||0;return{x:s(n.x,i),y:s(n.y,c)}}function s(e,n){let l=e%10,t=l+n;return 0!==l&&t>10?e+(10-l):l>0&&t<0?e-l:e+n}function y(){return null!==f}function P(){return(c===r||c===u?[t,o]:[r,u])[Math.floor(2*Math.random())]}function h(e){return e%10==0}function F(e){return Math.round(e/10)}function T(e,n){let l=e%10;return 0===l?e:n===u||n===o?e+(10-l):e-l}function m(n){return(e.getTick()-n)/d.FPS}return{eat:function(){f=null,a=e.getTick()},isVunerable:y,isDangerous:function(){return null===a},makeEatable:function(){var n;c=(n=c)===r&&u||n===u&&r||n===t&&o||t,f=e.getTick()},reset:function(){a=null,f=null,i={x:90,y:80},c=P(),v=P()},move:function e(l){let t=i,o=h((a=i).y)&&h(a.x),f=null;var a;if(v!==c&&(f=S(v,i),o&&n.isFloorSpace({y:F(T(f.y,v)),x:F(T(f.x,v))})?c=v:f=null),null===f&&(f=S(c,i)),o&&n.isWallSpace({y:F(T(f.y,c)),x:F(T(f.x,c))}))return v=P(),e(l);let s=function(e){return 100===e.y&&e.x>=190&&c===u?{y:100,x:-10}:100===e.y&&e.x<=-10&&c===r&&(i={y:100,x:190})}(i=f);return s&&(i=s),v=P(),{new:i,old:t}},draw:function(v){let S=n.blockSize,s=i.y/10*S,d=i.x/10*S;f&&m(f)>8&&(f=null),a&&m(a)>3&&(a=null);let y=d+S,P=s+S-3,h=S/10,F=e.getTick()%10>5?3:-3,T=e.getTick()%10>5?-3:3;v.fillStyle=f?m(f)>5&&e.getTick()%20>10?"#FFFFFF":"#0000BB":a?"#222":l,v.beginPath(),v.moveTo(d,P),v.quadraticCurveTo(d,s,d+S/2,s),v.quadraticCurveTo(d+S,s,d+S,P),v.quadraticCurveTo(y-1*h,P+F,y-2*h,P),v.quadraticCurveTo(y-3*h,P+T,y-4*h,P),v.quadraticCurveTo(y-5*h,P+F,y-6*h,P),v.quadraticCurveTo(y-7*h,P+T,y-8*h,P),v.quadraticCurveTo(y-9*h,P+F,y-10*h,P),v.closePath(),v.fill(),v.beginPath(),v.fillStyle="#FFF",v.arc(d+6,s+6,S/6,0,300,!1),v.arc(d+S-6,s+6,S/6,0,300,!1),v.closePath(),v.fill();let L=S/12,x={};x[u]=[L,0],x[r]=[-L,0],x[t]=[0,-L],x[o]=[0,L],v.beginPath(),v.fillStyle="#000",v.arc(d+6+x[c][0],s+6+x[c][1],S/15,0,300,!1),v.arc(d+S-6+x[c][0],s+6+x[c][1],S/15,0,300,!1),v.closePath(),v.fill()}}},d.User=function(e,n){let i=null,c=null,f=null,a=null,v=null,S=5,s={};function P(e){(S+=e)>=1e4&&S-e<1e4&&(v+=1)}function h(){S=0,v=3,F()}function F(){T(),f=0}function T(){i={x:90,y:120},c=r,a=r}function m(e,n){return{x:n.x+((e===r?-2:e===u&&2)||0),y:n.y+((e===o?2:e===t&&-2)||0)}}function L(e){return e%10==0}function x(e){return Math.round(e/10)}function E(e,n){let l=e%10;return 0===l?e:n===u||n===o?e+(10-l):e-l}function g(e,n){return{y:x(E(e.y,n)),x:x(E(e.x,n))}}function A(e){return L(e.y)&&L(e.x)}function p(e){let n=e%10;return n>3||n<7}return s[y.ARROW_LEFT]=r,s[y.ARROW_UP]=t,s[y.ARROW_RIGHT]=u,s[y.ARROW_DOWN]=o,h(),{draw:function(e){let l=n.blockSize,f=(v=i,(a=c)==u&&v.x%10<5?{start:.25,end:1.75,direction:!1}:a===o&&v.y%10<5?{start:.75,end:2.25,direction:!1}:a===t&&v.y%10<5?{start:1.25,end:1.75,direction:!0}:a===r&&v.x%10<5?{start:.75,end:1.25,direction:!0}:{start:0,end:2,direction:!1});var a,v;e.fillStyle="#FFFF00",e.beginPath(),e.moveTo(i.x/10*l+l/2,i.y/10*l+l/2),e.arc(i.x/10*l+l/2,i.y/10*l+l/2,l/2,Math.PI*f.start,Math.PI*f.end,f.direction),e.fill()},drawDead:function(e,l){let t=n.blockSize,r=t/2;l>=1||(e.fillStyle="#FFFF00",e.beginPath(),e.moveTo(i.x/10*t+r,i.y/10*t+r),e.arc(i.x/10*t+r,i.y/10*t+r,r,0,2*Math.PI*l,!0),e.fill())},loseLife:function(){v-=1},getLives:function(){return v},score:S,addScore:P,theScore:function(){return S},keyDown:function(e){return void 0===s[e.keyCode]||(a=s[e.keyCode],e.preventDefault(),e.stopPropagation(),!1)},move:function(v){let S=null,s=null,y=i,h=null;return a!==c&&(S=m(a,i),function(e,n){return!((e!==r&&e!==u||n!==r&&n!==u)&&(e!==t&&e!==o||n!==t&&n!==o))}(a,c)||A(i)&&n.isFloorSpace(g(S,a))?c=a:S=null),null===S&&(S=m(c,i)),A(i)&&n.isWallSpace(g(S,c))&&(c=l),c===l?{new:i,old:i}:(100===S.y&&S.x>=190&&c===u&&(S={y:100,x:-10}),100===S.y&&S.x<=-12&&c===r&&(S={y:100,x:190}),s=g(i=S,c),h=n.block(s),((p(i.y)||p(i.x))&&h===d.BISCUIT||h===d.PILL)&&(n.setBlock(s,d.EMPTY),P(h===d.BISCUIT?10:50),182===(f+=1)&&e.completedLevel(),h===d.PILL&&e.eatenPill()),{new:i,old:y})},newLevel:F,reset:function(){h(),T()},resetPosition:T}},d.Map=function(e){let n=null,l=null,t=e,r=0,o=null;function u(e,t){return e>=0&&e<n&&t>=0&&t<l}function c(){o=d.MAP.clone(),n=o.length,l=o[0].length}function f(e,n,l){let r=o[e][n];r!==d.PILL&&(l.beginPath(),r!==d.EMPTY&&r!==d.BLOCK&&r!==d.BISCUIT||(l.fillStyle="#000",l.fillRect(n*t,e*t,t,t),r===d.BISCUIT&&(l.fillStyle="#FFF",l.fillRect(n*t+t/2.5,e*t+t/2.5,t/6,t/6))),l.closePath())}return c(),{draw:function(e){let r,i,o=t;for(e.fillStyle="#000",e.fillRect(0,0,l*o,n*o),function(e){let n,l,r,i;for(e.strokeStyle="#0000FF",e.lineWidth=5,e.lineCap="round",n=0;n<d.WALLS.length;n+=1){for(i=d.WALLS[n],e.beginPath(),l=0;l<i.length;l+=1)(r=i[l]).move?e.moveTo(r.move[0]*t,r.move[1]*t):r.line?e.lineTo(r.line[0]*t,r.line[1]*t):r.curve&&e.quadraticCurveTo(r.curve[0]*t,r.curve[1]*t,r.curve[2]*t,r.curve[3]*t);e.stroke()}}(e),r=0;r<n;r+=1)for(i=0;i<l;i+=1)f(r,i,e)},drawBlock:f,drawPills:function(e){for(++r>30&&(r=0),i=0;i<n;i+=1)for(j=0;j<l;j+=1)o[i][j]===d.PILL&&(e.beginPath(),e.fillStyle="#000",e.fillRect(j*t,i*t,t,t),e.fillStyle="#FFF",e.arc(j*t+t/2,i*t+t/2,Math.abs(5-r/3),0,2*Math.PI,!1),e.fill(),e.closePath())},block:function(e){return o[e.y][e.x]},setBlock:function(e,n){o[e.y][e.x]=n},reset:c,isWallSpace:function(e){return u(e.y,e.x)&&o[e.y][e.x]===d.WALL},isFloorSpace:function(e){if(!u(e.y,e.x))return!1;let n=o[e.y][e.x];return n===d.EMPTY||n===d.BISCUIT||n===d.PILL},height:n,width:l,blockSize:t,getMap:function(){return o}}};!function(){let e,n,l=c,t=[],r=["#00FFDE","#FF0000","#FFB8DE","#FFB847"],o=0,u=0,P=0,h=!0,F=null,T=0,m=null,L=null,x=null,E=null,g=null;function A(){return P}function p(e){m.fillStyle="#FFFF00",m.font="14px BDCartoonShoutRegular";let n=m.measureText(e).width,l=(x.width*x.blockSize-n)/2;m.fillText(e,l,10*x.height+8)}function _(){E.resetPosition();for(let e=0;e<t.length;e+=1)t[e].reset();F=P,M(v)}function b(e){if(e.keyCode===y.N)M(c),u=1,E.reset(),x.reset(),x.draw(m),_();else if(e.keyCode===y.P&&l===f)x.draw(m),M(g);else if(e.keyCode===y.P)g=l,M(f),x.draw(m),p("Paused");else if(l!==f)return E.keyDown(e);return!0}function M(e){l=e,h=!0}function C(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))<10}function R(e){x.drawBlock(Math.floor(e.y/10),Math.floor(e.x/10),m),x.drawBlock(Math.ceil(e.y/10),Math.ceil(e.x/10),m)}function I(){let r;if(l!==f&&++P,x.drawPills(m),l===a)!function(){let l,r,i,u;for(e=[],r=0,i=t.length;r<i;r+=1)e.push(t[r].move(m));for(l=E.move(m),r=0,i=t.length;r<i;r+=1)R(e[r].old);for(R(l.old),r=0,i=t.length;r<i;r+=1)t[r].draw(m);for(E.draw(m),n=l.new,r=0,i=t.length;r<i;r+=1)C(n,e[r].new)&&(t[r].isVunerable()?(t[r].eat(),c=u=50*(o+=1),f=e[r],m.fillStyle="#FFFFFF",m.font="12px BDCartoonShoutRegular",m.fillText(c,f.new.x/10*x.blockSize,(f.new.y+5)/10*x.blockSize),E.addScore(u),M(S),F=P):t[r].isDangerous()&&(M(s),F=P));var c,f;d.STATE.set("ghost_position",e),d.STATE.set("ghost_edible",t.map(e=>e.isVunerable())),d.STATE.set("user_position",l.new),d.STATE.set("map",x.getMap())}();else if(l===c&&h)h=!1,x.draw(m),p("Press N to start a New game");else if(l===S&&P-F>d.FPS/3)x.draw(m),M(a);else if(l===s)if(P-F>2*d.FPS)M(c),E.loseLife(),E.getLives()>0&&_();else{for(R(n),i=0,len=t.length;i<len;i+=1)R(e[i].old),e.push(t[i].draw(m));E.drawDead(m,(P-F)/(2*d.FPS))}else l===v&&(0===(r=1+Math.floor((F-P)/d.FPS))?(x.draw(m),M(a)):r!==T&&(T=r,x.draw(m),p("Starting in: "+r)));!function(){let e=x.height*x.blockSize,n=e+17;m.fillStyle="#000000",m.fillRect(0,e,x.width*x.blockSize,30),m.fillStyle="#FFFF00";for(let n=0,l=E.getLives();n<l;n++)m.fillStyle="#FFFF00",m.beginPath(),m.moveTo(150+25*n+x.blockSize/2,e+1+x.blockSize/2),m.arc(150+25*n+x.blockSize/2,e+1+x.blockSize/2,x.blockSize/2,.25*Math.PI,1.75*Math.PI,!1),m.fill();m.font="bold 16px sans-serif",m.fillText("s",10,n),m.fillStyle="#FFFF00",m.font="14px BDCartoonShoutRegular",m.fillText("Score: "+E.theScore(),30,n),m.fillText("Level: "+u,260,n)}()}function w(){for(F=P,o=0,i=0;i<t.length;i+=1)t[i].makeEatable(m)}function O(){M(c),u+=1,x.reset(),E.newLevel(),_()}function k(e){l!==c&&l!==f&&(e.preventDefault(),e.stopPropagation())}}();let y={BACKSPACE:8,TAB:9,NUM_PAD_CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,SEMICOLON:59,WINDOWS_LEFT:91,WINDOWS_RIGHT:92,SELECT:93,NUM_PAD_ASTERISK:106,NUM_PAD_PLUS_SIGN:107,"NUM_PAD_HYPHEN-MINUS":109,NUM_PAD_FULL_STOP:110,NUM_PAD_SOLIDUS:111,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,EQUALS_SIGN:187,COMMA:188,"HYPHEN-MINUS":189,FULL_STOP:190,SOLIDUS:191,GRAVE_ACCENT:192,LEFT_SQUARE_BRACKET:219,REVERSE_SOLIDUS:220,RIGHT_SQUARE_BRACKET:221,APOSTROPHE:222};!function(){for(let e=48;e<=57;e++)y[""+(e-48)]=e;for(let e=65;e<=90;e++)y[""+String.fromCharCode(e)]=e;for(let e=96;e<=105;e++)y["NUM_PAD_"+(e-96)]=e;for(let e=112;e<=123;e++)y["F"+(e-112+1)]=e}(),d.WALL=0,d.BISCUIT=1,d.EMPTY=2,d.BLOCK=3,d.PILL=4,d.MAP=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,4,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,4,0],[0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,1,0],[0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,0],[0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0],[2,2,2,0,1,0,1,1,1,1,1,1,1,0,1,0,2,2,2],[0,0,0,0,1,0,1,0,0,3,0,0,1,0,1,0,0,0,0],[2,2,2,2,1,1,1,0,3,3,3,0,1,1,1,2,2,2,2],[0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0],[2,2,2,0,1,0,1,1,1,2,1,1,1,0,1,0,2,2,2],[0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0],[0,4,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,4,0],[0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0],[0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,0],[0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],d.WALLS=[[{move:[0,9.5]},{line:[3,9.5]},{curve:[3.5,9.5,3.5,9]},{line:[3.5,8]},{curve:[3.5,7.5,3,7.5]},{line:[1,7.5]},{curve:[.5,7.5,.5,7]},{line:[.5,1]},{curve:[.5,.5,1,.5]},{line:[9,.5]},{curve:[9.5,.5,9.5,1]},{line:[9.5,3.5]}],[{move:[9.5,1]},{curve:[9.5,.5,10,.5]},{line:[18,.5]},{curve:[18.5,.5,18.5,1]},{line:[18.5,7]},{curve:[18.5,7.5,18,7.5]},{line:[16,7.5]},{curve:[15.5,7.5,15.5,8]},{line:[15.5,9]},{curve:[15.5,9.5,16,9.5]},{line:[19,9.5]}],[{move:[2.5,5.5]},{line:[3.5,5.5]}],[{move:[3,2.5]},{curve:[3.5,2.5,3.5,3]},{curve:[3.5,3.5,3,3.5]},{curve:[2.5,3.5,2.5,3]},{curve:[2.5,2.5,3,2.5]}],[{move:[15.5,5.5]},{line:[16.5,5.5]}],[{move:[16,2.5]},{curve:[16.5,2.5,16.5,3]},{curve:[16.5,3.5,16,3.5]},{curve:[15.5,3.5,15.5,3]},{curve:[15.5,2.5,16,2.5]}],[{move:[6,2.5]},{line:[7,2.5]},{curve:[7.5,2.5,7.5,3]},{curve:[7.5,3.5,7,3.5]},{line:[6,3.5]},{curve:[5.5,3.5,5.5,3]},{curve:[5.5,2.5,6,2.5]}],[{move:[12,2.5]},{line:[13,2.5]},{curve:[13.5,2.5,13.5,3]},{curve:[13.5,3.5,13,3.5]},{line:[12,3.5]},{curve:[11.5,3.5,11.5,3]},{curve:[11.5,2.5,12,2.5]}],[{move:[7.5,5.5]},{line:[9,5.5]},{curve:[9.5,5.5,9.5,6]},{line:[9.5,7.5]}],[{move:[9.5,6]},{curve:[9.5,5.5,10.5,5.5]},{line:[11.5,5.5]}],[{move:[5.5,5.5]},{line:[5.5,7]},{curve:[5.5,7.5,6,7.5]},{line:[7.5,7.5]}],[{move:[6,7.5]},{curve:[5.5,7.5,5.5,8]},{line:[5.5,9.5]}],[{move:[13.5,5.5]},{line:[13.5,7]},{curve:[13.5,7.5,13,7.5]},{line:[11.5,7.5]}],[{move:[13,7.5]},{curve:[13.5,7.5,13.5,8]},{line:[13.5,9.5]}],[{move:[0,11.5]},{line:[3,11.5]},{curve:[3.5,11.5,3.5,12]},{line:[3.5,13]},{curve:[3.5,13.5,3,13.5]},{line:[1,13.5]},{curve:[.5,13.5,.5,14]},{line:[.5,17]},{curve:[.5,17.5,1,17.5]},{line:[1.5,17.5]}],[{move:[1,17.5]},{curve:[.5,17.5,.5,18]},{line:[.5,21]},{curve:[.5,21.5,1,21.5]},{line:[18,21.5]},{curve:[18.5,21.5,18.5,21]},{line:[18.5,18]},{curve:[18.5,17.5,18,17.5]},{line:[17.5,17.5]}],[{move:[18,17.5]},{curve:[18.5,17.5,18.5,17]},{line:[18.5,14]},{curve:[18.5,13.5,18,13.5]},{line:[16,13.5]},{curve:[15.5,13.5,15.5,13]},{line:[15.5,12]},{curve:[15.5,11.5,16,11.5]},{line:[19,11.5]}],[{move:[5.5,11.5]},{line:[5.5,13.5]}],[{move:[13.5,11.5]},{line:[13.5,13.5]}],[{move:[2.5,15.5]},{line:[3,15.5]},{curve:[3.5,15.5,3.5,16]},{line:[3.5,17.5]}],[{move:[16.5,15.5]},{line:[16,15.5]},{curve:[15.5,15.5,15.5,16]},{line:[15.5,17.5]}],[{move:[5.5,15.5]},{line:[7.5,15.5]}],[{move:[11.5,15.5]},{line:[13.5,15.5]}],[{move:[2.5,19.5]},{line:[5,19.5]},{curve:[5.5,19.5,5.5,19]},{line:[5.5,17.5]}],[{move:[5.5,19]},{curve:[5.5,19.5,6,19.5]},{line:[7.5,19.5]}],[{move:[11.5,19.5]},{line:[13,19.5]},{curve:[13.5,19.5,13.5,19]},{line:[13.5,17.5]}],[{move:[13.5,19]},{curve:[13.5,19.5,14,19.5]},{line:[16.5,19.5]}],[{move:[7.5,13.5]},{line:[9,13.5]},{curve:[9.5,13.5,9.5,14]},{line:[9.5,15.5]}],[{move:[9.5,14]},{curve:[9.5,13.5,10,13.5]},{line:[11.5,13.5]}],[{move:[7.5,17.5]},{line:[9,17.5]},{curve:[9.5,17.5,9.5,18]},{line:[9.5,19.5]}],[{move:[9.5,18]},{curve:[9.5,17.5,10,17.5]},{line:[11.5,17.5]}],[{move:[8.5,9.5]},{line:[8,9.5]},{curve:[7.5,9.5,7.5,10]},{line:[7.5,11]},{curve:[7.5,11.5,8,11.5]},{line:[11,11.5]},{curve:[11.5,11.5,11.5,11]},{line:[11.5,10]},{curve:[11.5,9.5,11,9.5]},{line:[10.5,9.5]}]],Object.prototype.clone=function(){let e,n=this instanceof Array?[]:{};for(e in this)"clone"!==e&&(this[e]&&"object"==typeof this[e]?n[e]=this[e].clone():n[e]=this[e]);return n}}]);
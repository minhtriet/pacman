!function(e){var n={};function t(l){if(n[l])return n[l].exports;var i=n[l]={i:l,l:!1,exports:{}};return e[l].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,l){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:l})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(t.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(l,i,function(n){return e[n]}.bind(null,i));return l},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n){let t=4,l=3,r=2,o=1,u=11,c=5,a=6,f=7,v=8,s=9,d=10,S={FPS:30};S.STATE=new Map,S.Ghost=function(e,n,t){let i=null,c=null,a=null,f=null,v=null;function s(e,n){let t=y()?1:null===a&&null!==f?4:2,i=e===r&&-t||e===u&&t||0,c=e===o&&t||e===l&&-t||0;return{x:d(n.x,i),y:d(n.y,c)}}function d(e,n){let t=e%10,l=t+n;return 0!==t&&l>10?e+(10-t):t>0&&l<0?e-t:e+n}function y(){return null!==a}function P(){return(c===r||c===u?[l,o]:[r,u])[Math.floor(2*Math.random())]}function h(e){return e%10==0}function T(e){return Math.round(e/10)}function F(e,n){let t=e%10;return 0===t?e:n===u||n===o?e+(10-t):e-t}function m(n){return(e.getTick()-n)/S.FPS}return{eat:function(){a=null,f=e.getTick()},isVunerable:y,isDangerous:function(){return null===f},makeEatable:function(){var n;c=(n=c)===r&&u||n===u&&r||n===l&&o||l,a=e.getTick()},reset:function(){f=null,a=null,i={x:90,y:80},c=P(),v=P()},move:function e(t){let l=i,o=h((f=i).y)&&h(f.x),a=null;var f;if(v!==c&&(a=s(v,i),o&&n.isFloorSpace({y:T(F(a.y,v)),x:T(F(a.x,v))})?c=v:a=null),null===a&&(a=s(c,i)),o&&n.isWallSpace({y:T(F(a.y,c)),x:T(F(a.x,c))}))return v=P(),e(t);let d=function(e){return 100===e.y&&e.x>=190&&c===u?{y:100,x:-10}:100===e.y&&e.x<=-10&&c===r&&(i={y:100,x:190})}(i=a);return d&&(i=d),v=P(),{new:i,old:l}},draw:function(v){let s=n.blockSize,d=i.y/10*s,S=i.x/10*s;a&&m(a)>8&&(a=null),f&&m(f)>3&&(f=null);let y=S+s,P=d+s-3,h=s/10,T=e.getTick()%10>5?3:-3,F=e.getTick()%10>5?-3:3;v.fillStyle=a?m(a)>5&&e.getTick()%20>10?"#FFFFFF":"#0000BB":f?"#222":t,v.beginPath(),v.moveTo(S,P),v.quadraticCurveTo(S,d,S+s/2,d),v.quadraticCurveTo(S+s,d,S+s,P),v.quadraticCurveTo(y-1*h,P+T,y-2*h,P),v.quadraticCurveTo(y-3*h,P+F,y-4*h,P),v.quadraticCurveTo(y-5*h,P+T,y-6*h,P),v.quadraticCurveTo(y-7*h,P+F,y-8*h,P),v.quadraticCurveTo(y-9*h,P+T,y-10*h,P),v.closePath(),v.fill(),v.beginPath(),v.fillStyle="#FFF",v.arc(S+6,d+6,s/6,0,300,!1),v.arc(S+s-6,d+6,s/6,0,300,!1),v.closePath(),v.fill();let L=s/12,x={};x[u]=[L,0],x[r]=[-L,0],x[l]=[0,-L],x[o]=[0,L],v.beginPath(),v.fillStyle="#000",v.arc(S+6+x[c][0],d+6+x[c][1],s/15,0,300,!1),v.arc(S+s-6+x[c][0],d+6+x[c][1],s/15,0,300,!1),v.closePath(),v.fill()}}},S.User=function(e,n){let i=null,c=null,a=null,f=null,v=null,s=5,d={};function y(e){(s+=e)>=1e4&&s-e<1e4&&(v+=1)}function h(){s=0,v=3,T()}function T(){F(),a=0}function F(){i={x:90,y:120},c=r,f=r}function m(e,n){return{x:n.x+((e===r?-2:e===u&&2)||0),y:n.y+((e===o?2:e===l&&-2)||0)}}function L(e){return e%10==0}function x(e){return Math.round(e/10)}function g(e,n){let t=e%10;return 0===t?e:n===u||n===o?e+(10-t):e-t}function p(e,n){return{y:x(g(e.y,n)),x:x(g(e.x,n))}}function E(e){return L(e.y)&&L(e.x)}function A(e){let n=e%10;return n>3||n<7}return d[P.ARROW_LEFT]=r,d[P.ARROW_UP]=l,d[P.ARROW_RIGHT]=u,d[P.ARROW_DOWN]=o,h(),{draw:function(e){let t=n.blockSize,a=(v=i,(f=c)==u&&v.x%10<5?{start:.25,end:1.75,direction:!1}:f===o&&v.y%10<5?{start:.75,end:2.25,direction:!1}:f===l&&v.y%10<5?{start:1.25,end:1.75,direction:!0}:f===r&&v.x%10<5?{start:.75,end:1.25,direction:!0}:{start:0,end:2,direction:!1});var f,v;e.fillStyle="#FFFF00",e.beginPath(),e.moveTo(i.x/10*t+t/2,i.y/10*t+t/2),e.arc(i.x/10*t+t/2,i.y/10*t+t/2,t/2,Math.PI*a.start,Math.PI*a.end,a.direction),e.fill()},drawDead:function(e,t){let l=n.blockSize,r=l/2;t>=1||(e.fillStyle="#FFFF00",e.beginPath(),e.moveTo(i.x/10*l+r,i.y/10*l+r),e.arc(i.x/10*l+r,i.y/10*l+r,r,0,2*Math.PI*t,!0),e.fill())},loseLife:function(){v-=1},getLives:function(){return v},score:s,addScore:y,theScore:function(){return s},keyDown:function(e){return void 0===d[e.keyCode]||(f=d[e.keyCode],e.preventDefault(),e.stopPropagation(),!1)},move:function(v){let s=null,d=null,P=i,h=null;return f!==c&&(s=m(f,i),function(e,n){return!((e!==r&&e!==u||n!==r&&n!==u)&&(e!==l&&e!==o||n!==l&&n!==o))}(f,c)||E(i)&&n.isFloorSpace(p(s,f))?c=f:s=null),null===s&&(s=m(c,i)),E(i)&&n.isWallSpace(p(s,c))&&(c=t),c===t?{new:i,old:i}:(100===s.y&&s.x>=190&&c===u&&(s={y:100,x:-10}),100===s.y&&s.x<=-12&&c===r&&(s={y:100,x:190}),d=p(i=s,c),h=n.block(d),((A(i.y)||A(i.x))&&h===S.BISCUIT||h===S.PILL)&&(n.setBlock(d,S.EMPTY),y(h===S.BISCUIT?10:50),182===(a+=1)&&e.completedLevel(),h===S.PILL&&e.eatenPill()),{new:i,old:P})},newLevel:T,reset:function(){h(),F()},resetPosition:F}},S.Map=function(e){let n=null,t=null,l=e,r=0,o=null;function u(e,l){return e>=0&&e<n&&l>=0&&l<t}function c(){o=S.MAP.clone(),n=o.length,t=o[0].length}function a(e,n,t){let i=o[e][n];i!==S.PILL&&(t.beginPath(),i!==S.EMPTY&&i!==S.BLOCK&&i!==S.BISCUIT||(t.fillStyle="#000",t.fillRect(n*l,e*l,l,l),i===S.BISCUIT&&(t.fillStyle="#FFF",t.fillRect(n*l+l/2.5,e*l+l/2.5,l/6,l/6))),t.closePath())}return c(),{draw:function(e){let i,r,o=l;for(e.fillStyle="#000",e.fillRect(0,0,t*o,n*o),function(e){let n,t,i,r;for(e.strokeStyle="#0000FF",e.lineWidth=5,e.lineCap="round",n=0;n<S.WALLS.length;n+=1){for(r=S.WALLS[n],e.beginPath(),t=0;t<r.length;t+=1)(i=r[t]).move?e.moveTo(i.move[0]*l,i.move[1]*l):i.line?e.lineTo(i.line[0]*l,i.line[1]*l):i.curve&&e.quadraticCurveTo(i.curve[0]*l,i.curve[1]*l,i.curve[2]*l,i.curve[3]*l);e.stroke()}}(e),i=0;i<n;i+=1)for(r=0;r<t;r+=1)a(i,r,e)},drawBlock:a,drawPills:function(e){for(++r>30&&(r=0),i=0;i<n;i+=1)for(j=0;j<t;j+=1)o[i][j]===S.PILL&&(e.beginPath(),e.fillStyle="#000",e.fillRect(j*l,i*l,l,l),e.fillStyle="#FFF",e.arc(j*l+l/2,i*l+l/2,Math.abs(5-r/3),0,2*Math.PI,!1),e.fill(),e.closePath())},block:function(e){return o[e.y][e.x]},setBlock:function(e,n){o[e.y][e.x]=n},reset:c,isWallSpace:function(e){return u(e.y,e.x)&&o[e.y][e.x]===S.WALL},isFloorSpace:function(e){if(!u(e.y,e.x))return!1;let n=o[e.y][e.x];return n===S.EMPTY||n===S.BISCUIT||n===S.PILL},height:n,width:t,blockSize:l,getMap:function(){return o}}};let y=function(){let e,n,t=c,l=[],r=["#00FFDE","#FF0000","#FFB8DE","#FFB847"],o=0,u=0,y=0,h=!0,T=null,F=0,m=null,L=null,x=null,g=null,p=null;function E(){return y}function A(e){m.fillStyle="#FFFF00",m.font="14px BDCartoonShoutRegular";let n=m.measureText(e).width,t=(x.width*x.blockSize-n)/2;m.fillText(e,t,10*x.height+8)}function w(){g.resetPosition();for(let e=0;e<l.length;e+=1)l[e].reset();T=y,C(v)}function b(e){if(e.keyCode===P.N)C(c),u=1,g.reset(),x.reset(),x.draw(m),w();else if(e.keyCode===P.P&&t===a)x.draw(m),C(p);else if(e.keyCode===P.P)p=t,C(a),x.draw(m),A("Paused");else if(t!==a)return g.keyDown(e);return!0}function C(e){t=e,h=!0}function M(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))<10}function _(e){x.drawBlock(Math.floor(e.y/10),Math.floor(e.x/10),m),x.drawBlock(Math.ceil(e.y/10),Math.ceil(e.x/10),m)}function I(){let r;if(t!==a&&++y,x.drawPills(m),t===f)!function(){let t,i,r,u;for(e=[],i=0,r=l.length;i<r;i+=1)e.push(l[i].move(m));for(t=g.move(m),i=0,r=l.length;i<r;i+=1)_(e[i].old);for(_(t.old),i=0,r=l.length;i<r;i+=1)l[i].draw(m);for(g.draw(m),n=t.new,i=0,r=l.length;i<r;i+=1)M(n,e[i].new)&&(l[i].isVunerable()?(l[i].eat(),c=u=50*(o+=1),a=e[i],m.fillStyle="#FFFFFF",m.font="12px BDCartoonShoutRegular",m.fillText(c,a.new.x/10*x.blockSize,(a.new.y+5)/10*x.blockSize),g.addScore(u),C(s),T=y):l[i].isDangerous()&&(C(d),T=y));var c,a;S.STATE.set("ghost_position",e),S.STATE.set("ghost_edible",l.map(e=>e.isVunerable())),S.STATE.set("user_position",t.new),S.STATE.set("map",x.getMap())}();else if(t===c&&h)h=!1,x.draw(m),A("Press N to start a New game");else if(t===s&&y-T>S.FPS/3)x.draw(m),C(f);else if(t===d)if(y-T>2*S.FPS)C(c),g.loseLife(),g.getLives()>0&&w();else{for(_(n),i=0,len=l.length;i<len;i+=1)_(e[i].old),e.push(l[i].draw(m));g.drawDead(m,(y-T)/(2*S.FPS))}else t===v&&(0===(r=1+Math.floor((T-y)/S.FPS))?(x.draw(m),C(f)):r!==F&&(F=r,x.draw(m),A("Starting in: "+r)));!function(){let e=x.height*x.blockSize,n=e+17;m.fillStyle="#000000",m.fillRect(0,e,x.width*x.blockSize,30),m.fillStyle="#FFFF00";for(let n=0,t=g.getLives();n<t;n++)m.fillStyle="#FFFF00",m.beginPath(),m.moveTo(150+25*n+x.blockSize/2,e+1+x.blockSize/2),m.arc(150+25*n+x.blockSize/2,e+1+x.blockSize/2,x.blockSize/2,.25*Math.PI,1.75*Math.PI,!1),m.fill();m.font="bold 16px sans-serif",m.fillText("s",10,n),m.fillStyle="#FFFF00",m.font="14px BDCartoonShoutRegular",m.fillText("Score: "+g.theScore(),30,n),m.fillText("Level: "+u,260,n)}()}function R(){for(T=y,o=0,i=0;i<l.length;i+=1)l[i].makeEatable(m)}function k(){C(c),u+=1,x.reset(),g.newLevel(),w()}function O(e){t!==c&&t!==a&&(e.preventDefault(),e.stopPropagation())}return{init:function(e,n){let t,i,o,u=e.offsetWidth/19,c=document.createElement("canvas");for(c.setAttribute("width",19*u+"px"),c.setAttribute("height",22*u+30+"px"),e.appendChild(c),m=c.getContext("2d"),x=new S.Map(u),g=new S.User({completedLevel:k,eatenPill:R},x),t=0,i=r.length;t<i;t+=1)o=new S.Ghost({getTick:E},x,r[t]),l.push(o);x.draw(m),A("Loading ..."),A("Press N to Start"),document.addEventListener("keydown",b,!0),document.addEventListener("keypress",O,!0),L=window.setInterval(I,1e3/S.FPS)}}}(),P={BACKSPACE:8,TAB:9,NUM_PAD_CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,SEMICOLON:59,WINDOWS_LEFT:91,WINDOWS_RIGHT:92,SELECT:93,NUM_PAD_ASTERISK:106,NUM_PAD_PLUS_SIGN:107,"NUM_PAD_HYPHEN-MINUS":109,NUM_PAD_FULL_STOP:110,NUM_PAD_SOLIDUS:111,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,EQUALS_SIGN:187,COMMA:188,"HYPHEN-MINUS":189,FULL_STOP:190,SOLIDUS:191,GRAVE_ACCENT:192,LEFT_SQUARE_BRACKET:219,REVERSE_SOLIDUS:220,RIGHT_SQUARE_BRACKET:221,APOSTROPHE:222};!function(){for(let e=48;e<=57;e++)P[""+(e-48)]=e;for(let e=65;e<=90;e++)P[""+String.fromCharCode(e)]=e;for(let e=96;e<=105;e++)P["NUM_PAD_"+(e-96)]=e;for(let e=112;e<=123;e++)P["F"+(e-112+1)]=e}(),S.WALL=0,S.BISCUIT=1,S.EMPTY=2,S.BLOCK=3,S.PILL=4,S.MAP=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,4,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,4,0],[0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,1,0],[0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,0],[0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0],[2,2,2,0,1,0,1,1,1,1,1,1,1,0,1,0,2,2,2],[0,0,0,0,1,0,1,0,0,3,0,0,1,0,1,0,0,0,0],[2,2,2,2,1,1,1,0,3,3,3,0,1,1,1,2,2,2,2],[0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0],[2,2,2,0,1,0,1,1,1,2,1,1,1,0,1,0,2,2,2],[0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0],[0,4,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,4,0],[0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0],[0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,0],[0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],S.WALLS=[[{move:[0,9.5]},{line:[3,9.5]},{curve:[3.5,9.5,3.5,9]},{line:[3.5,8]},{curve:[3.5,7.5,3,7.5]},{line:[1,7.5]},{curve:[.5,7.5,.5,7]},{line:[.5,1]},{curve:[.5,.5,1,.5]},{line:[9,.5]},{curve:[9.5,.5,9.5,1]},{line:[9.5,3.5]}],[{move:[9.5,1]},{curve:[9.5,.5,10,.5]},{line:[18,.5]},{curve:[18.5,.5,18.5,1]},{line:[18.5,7]},{curve:[18.5,7.5,18,7.5]},{line:[16,7.5]},{curve:[15.5,7.5,15.5,8]},{line:[15.5,9]},{curve:[15.5,9.5,16,9.5]},{line:[19,9.5]}],[{move:[2.5,5.5]},{line:[3.5,5.5]}],[{move:[3,2.5]},{curve:[3.5,2.5,3.5,3]},{curve:[3.5,3.5,3,3.5]},{curve:[2.5,3.5,2.5,3]},{curve:[2.5,2.5,3,2.5]}],[{move:[15.5,5.5]},{line:[16.5,5.5]}],[{move:[16,2.5]},{curve:[16.5,2.5,16.5,3]},{curve:[16.5,3.5,16,3.5]},{curve:[15.5,3.5,15.5,3]},{curve:[15.5,2.5,16,2.5]}],[{move:[6,2.5]},{line:[7,2.5]},{curve:[7.5,2.5,7.5,3]},{curve:[7.5,3.5,7,3.5]},{line:[6,3.5]},{curve:[5.5,3.5,5.5,3]},{curve:[5.5,2.5,6,2.5]}],[{move:[12,2.5]},{line:[13,2.5]},{curve:[13.5,2.5,13.5,3]},{curve:[13.5,3.5,13,3.5]},{line:[12,3.5]},{curve:[11.5,3.5,11.5,3]},{curve:[11.5,2.5,12,2.5]}],[{move:[7.5,5.5]},{line:[9,5.5]},{curve:[9.5,5.5,9.5,6]},{line:[9.5,7.5]}],[{move:[9.5,6]},{curve:[9.5,5.5,10.5,5.5]},{line:[11.5,5.5]}],[{move:[5.5,5.5]},{line:[5.5,7]},{curve:[5.5,7.5,6,7.5]},{line:[7.5,7.5]}],[{move:[6,7.5]},{curve:[5.5,7.5,5.5,8]},{line:[5.5,9.5]}],[{move:[13.5,5.5]},{line:[13.5,7]},{curve:[13.5,7.5,13,7.5]},{line:[11.5,7.5]}],[{move:[13,7.5]},{curve:[13.5,7.5,13.5,8]},{line:[13.5,9.5]}],[{move:[0,11.5]},{line:[3,11.5]},{curve:[3.5,11.5,3.5,12]},{line:[3.5,13]},{curve:[3.5,13.5,3,13.5]},{line:[1,13.5]},{curve:[.5,13.5,.5,14]},{line:[.5,17]},{curve:[.5,17.5,1,17.5]},{line:[1.5,17.5]}],[{move:[1,17.5]},{curve:[.5,17.5,.5,18]},{line:[.5,21]},{curve:[.5,21.5,1,21.5]},{line:[18,21.5]},{curve:[18.5,21.5,18.5,21]},{line:[18.5,18]},{curve:[18.5,17.5,18,17.5]},{line:[17.5,17.5]}],[{move:[18,17.5]},{curve:[18.5,17.5,18.5,17]},{line:[18.5,14]},{curve:[18.5,13.5,18,13.5]},{line:[16,13.5]},{curve:[15.5,13.5,15.5,13]},{line:[15.5,12]},{curve:[15.5,11.5,16,11.5]},{line:[19,11.5]}],[{move:[5.5,11.5]},{line:[5.5,13.5]}],[{move:[13.5,11.5]},{line:[13.5,13.5]}],[{move:[2.5,15.5]},{line:[3,15.5]},{curve:[3.5,15.5,3.5,16]},{line:[3.5,17.5]}],[{move:[16.5,15.5]},{line:[16,15.5]},{curve:[15.5,15.5,15.5,16]},{line:[15.5,17.5]}],[{move:[5.5,15.5]},{line:[7.5,15.5]}],[{move:[11.5,15.5]},{line:[13.5,15.5]}],[{move:[2.5,19.5]},{line:[5,19.5]},{curve:[5.5,19.5,5.5,19]},{line:[5.5,17.5]}],[{move:[5.5,19]},{curve:[5.5,19.5,6,19.5]},{line:[7.5,19.5]}],[{move:[11.5,19.5]},{line:[13,19.5]},{curve:[13.5,19.5,13.5,19]},{line:[13.5,17.5]}],[{move:[13.5,19]},{curve:[13.5,19.5,14,19.5]},{line:[16.5,19.5]}],[{move:[7.5,13.5]},{line:[9,13.5]},{curve:[9.5,13.5,9.5,14]},{line:[9.5,15.5]}],[{move:[9.5,14]},{curve:[9.5,13.5,10,13.5]},{line:[11.5,13.5]}],[{move:[7.5,17.5]},{line:[9,17.5]},{curve:[9.5,17.5,9.5,18]},{line:[9.5,19.5]}],[{move:[9.5,18]},{curve:[9.5,17.5,10,17.5]},{line:[11.5,17.5]}],[{move:[8.5,9.5]},{line:[8,9.5]},{curve:[7.5,9.5,7.5,10]},{line:[7.5,11]},{curve:[7.5,11.5,8,11.5]},{line:[11,11.5]},{curve:[11.5,11.5,11.5,11]},{line:[11.5,10]},{curve:[11.5,9.5,11,9.5]},{line:[10.5,9.5]}]],Object.prototype.clone=function(){let e,n=this instanceof Array?[]:{};for(e in this)"clone"!==e&&(this[e]&&"object"==typeof this[e]?n[e]=this[e].clone():n[e]=this[e]);return n};var h=document.getElementById("pacman");window.setTimeout((function(){y.init(h,"./")}),0)}]);